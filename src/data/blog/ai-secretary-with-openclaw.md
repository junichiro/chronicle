---
author: junichiro
pubDatetime: 2026-02-01T01:00:00+09:00
title: 自宅サーバーにAI秘書を常駐させたら、家計管理が完全自動化された話
slug: ai-secretary-with-openclaw
featured: true
draft: false
tags:
  - AI
  - automation
  - OpenClaw
  - self-hosted
description: OpenClaw（旧Clawdbot）を使って自宅サーバーにAI秘書を常駐させ、金融サービスの口座更新を完全自動化するまでの記録。ボット検知との戦い、AIが自発的に提案したGUIアプローチ、OTP自動化の実装を紹介します。
---

## はじめに

「AIアシスタント」と聞いて、何を思い浮かべるだろうか。ChatGPT のような対話型チャット？ Siri のような音声アシスタント？

私が構築したのは、もう少し違うものだ。 **自宅サーバーに常駐し、Telegram 経由で指示を受け、ブラウザを操作し、スケジュール実行までこなすAI秘書** ——いわば、デジタルな住み込み秘書である。

この記事では、 **OpenClaw** （旧 Clawdbot）[^1] を使ってAI秘書を構築し、金融サービスの口座更新を完全自動化するまでの過程を紹介する。技術的なハマりどころや、AIが人間の発想を超えてきた瞬間についても触れたい。

[^1]: OpenClaw は 2025年11月に「Clawdbot」として誕生したオープンソースのパーソナルAIアシスタント。Anthropic からの商標に関する指摘を受けて「Moltbot」にリネーム、その後2026年1月に「OpenClaw」へと再度改名された。ロブスターのマスコットは健在。GitHub: [openclaw/openclaw](https://github.com/openclaw/openclaw)、公式サイト: [openclaw.ai](https://openclaw.ai/)

## OpenClaw とは

OpenClaw は、自分のデバイス上で動作するパーソナルAIアシスタントだ。特徴的なのは以下の点：

- **メッセージングアプリ統合** ：Telegram、WhatsApp、Slack、Discord など主要なプラットフォームと連携
- **ファイル操作・コマンド実行** ：サーバー上でシェルコマンドを実行し、ファイルを読み書きできる
- **ブラウザ自動化** ：Headless（またはGUI）ブラウザを操作してWebサービスを自動化
- **スケジュール実行** ：cron ジョブによる定期タスクの自動実行
- **記憶の永続化** ：会話履歴やコンテキストをファイルベースで保持し、セッションをまたいで文脈を維持

要するに、 **チャットで指示すれば何でもやってくれるAI秘書** が自宅サーバーに住み着く、というコンセプトだ。

## 構築環境

今回の構築環境は以下の通り：

| 項目 | 内容 |
|------|------|
| サーバー | Ubuntu 24.04 LTS（自宅常時稼働） |
| AI基盤 | OpenClaw + Claude（Anthropic） |
| メッセージング | Telegram Bot API |
| ブラウザ | Chromium（Xvfb 経由で GUI 描画） |
| 自動化対象 | 金融サービスの口座データ一括更新 |

セットアップ自体は OpenClaw の公式ドキュメントに従えば30分程度で完了する。Telegram Bot を作成し、トークンを設定すれば、スマートフォンからAI秘書にメッセージを送れるようになる。

## 自動化の対象：金融口座の一括更新

私は家計管理サービスを使って複数の金融口座を一元管理している。しかし、一部の口座は手動で更新ボタンを押す必要があり、さらに2要素認証（OTP）を求められるものもあった。

毎日の手動作業：

1. ブラウザで家計管理サービスにログイン
2. 「一括更新」ボタンをクリック
3. OTP を要求された口座について、メールで届くワンタイムパスワードを確認
4. OTP を入力して認証を完了

これを **平日の株式市場閉場後に毎日** やりたい。人間がやるには地味にめんどくさい。AI秘書の最初の大仕事として、これを完全自動化することにした。

## ボット検知との戦い——AIが提案した逆転の発想

### 最初のアプローチ：Headless ブラウザ

最初は定石通り、Headless Chrome（画面なしのブラウザ）でのアクセスを試みた。

```
私：「Headless Chrome でログインページにアクセスして」
AI：「了解しました。アクセスします。」
AI：「……ログインページが表示されません。ボット検知に引っかかっているようです。」
```

金融サービス側のセキュリティは当然堅い。Headless ブラウザの特徴的なフィンガープリント（`navigator.webdriver` フラグ、特定の JavaScript API の挙動など）を検知して、アクセスを拒否してくる。

### ステルス対策を試みるも……

次に、ボット検知を回避するための一般的なテクニックを試した：

- `--disable-blink-features=AutomationControlled` フラグ
- User-Agent の偽装
- WebDriver プロパティの書き換え

```
AI：「ステルス設定を追加してリトライします。」
AI：「……まだ検知されています。このサービスのボット検知はかなり高度です。」
```

ここで、AI秘書が興味深い提案をしてきた。

### 「GUIで動かしませんか？」

```
AI：「提案があります。Headless モードを諦めて、実際のGUI環境でブラウザを
　　　起動するのはどうでしょうか。Xvfb（仮想フレームバッファ）を使えば、
　　　ディスプレイのないサーバーでもGUIアプリケーションを動かせます。」
```

正直に言うと、この提案は意表を突かれた。

私はエンジニアとして長年CUIベースの自動化に慣れ親しんできた。ブラウザの自動化といえば Headless が当然で、「画面を表示して動かす」という発想は最初から選択肢になかった。

しかしAIの論理は明快だった：

```
AI：「Headless ブラウザはフィンガープリントで識別されやすく、対策はいたちごっこに
　　　なります。一方、通常のGUIブラウザは一般ユーザーと区別がつきません。
　　　Xvfb は仮想的な画面を提供するだけで、ブラウザ自体は完全に通常モードで
　　　動作します。検知される理由がなくなります。」
```

**人間がCUIの枠内で考えていたところに、AIがGUIという選択肢を持ち込んだ。** 技術的には特別なことではないが、発想の転換としては示唆に富む出来事だった。

### Xvfb + 非 Headless Chrome の導入

```bash
# 仮想ディスプレイの起動
Xvfb :99 -screen 0 1920x1080x24 &
export DISPLAY=:99

# 通常モードでChromiumを起動（Headless ではない）
chromium --no-sandbox --disable-gpu --display=:99
```

結果は一発で成功した。ボット検知をすり抜け、ログインページが正常に表示された。

## OTP 自動化：メールからワンタイムパスワードを取得

ログインの壁を越えた次の課題は、2要素認証だ。一部の金融口座は更新時にOTP（ワンタイムパスワード）を要求する。パスワードはメールで届く。

これもAI秘書に自動化させた：

1. **Gmail API** でメールボックスを監視
2. OTP を要求された時点で、最新のOTPメールを検索
3. メール本文からワンタイムパスワードを正規表現で抽出
4. 抽出したOTPをブラウザの入力フィールドに自動入力

```
AI：「OTP メールが届きました。コード: 123456。入力します。」
AI：「認証成功。口座データの更新を開始します。」
```

ここまでの一連の流れ——ログイン、一括更新、OTP認証——が **約70秒で完全自動化** された。

## 完成した自動化パイプライン

最終的に構築された自動化の全体像：

```
┌─────────────────────────────────────────┐
│  cron（平日 16:30 JST に自動起動）       │
└──────────────┬──────────────────────────┘
               ▼
┌─────────────────────────────────────────┐
│  Xvfb 仮想ディスプレイ起動              │
│  Chromium（通常モード）でサービスにログイン │
└──────────────┬──────────────────────────┘
               ▼
┌─────────────────────────────────────────┐
│  全口座の一括更新を実行                  │
│  OTP 要求があれば Gmail API で自動取得   │
└──────────────┬──────────────────────────┘
               ▼
┌─────────────────────────────────────────┐
│  結果サマリーを生成                      │
│  エラーがあれば Telegram で通知          │
└─────────────────────────────────────────┘
```

- **対象口座数** ：20以上
- **OTP 対応口座** ：2口座（自動処理）
- **実行時間** ：約70秒
- **人間の介入** ：ゼロ

## AIに「任せる」ということ

この構築を通じて感じたのは、 **AIとの協業における「任せ方」の重要性** だ。

従来の自動化は、人間が設計し、人間が実装し、人間がデバッグする。AIは「指示された通りに動くツール」だった。

しかし今回のケースでは、AIが自発的にアプローチを提案し、人間が思いつかなかった解決策を持ち込んできた。Headless → GUI への切り替えは、技術的には些細な変更だ。しかし **「CUI で解決すべき」という人間の先入観を、AIが打ち破った** という点で、象徴的な出来事だったと思う。

重要なのは、AIに十分なコンテキストを与え、 **「やり方」ではなく「やりたいこと」を伝える** ことだ。手段を指定すると人間の発想の範囲に閉じてしまうが、目的を伝えれば、AIは独自のアプローチを模索できる。

## おわりに

自宅サーバーにAI秘書を常駐させて約1週間。日々の家計管理の自動化は快適に動いている。

OpenClaw のようなセルフホスト型AIアシスタントは、まだ発展途上のツールだ（名前が1週間で2回変わるプロジェクトだ、察してほしい）。しかし、 **「AIに日常のタスクを任せる」という体験** は、想像以上に未来を感じさせるものだった。

次は何を自動化しようか——そう考えている時点で、もうこのAI秘書なしの生活には戻れないのかもしれない。
